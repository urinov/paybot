<!doctype html>
<html lang="uz">
<head>
  <meta charset="utf-8">
  <title>PayBot test</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
</head>
<body>
  <h1>PayBot test</h1>

  <label>Summa (tiyin): <input id="amt" type="number" value="1100000"></label>
  <button onclick="make()">Yangi order yarat</button>

  <div id="out"></div>

  <script>
    async function make() {
      const amount = document.getElementById('amt').value || '1100000';
      const { orderId } = await fetch('/api/new-order?amount='+amount).then(r=>r.json());
      const payme  = await fetch(`/api/checkout-url?order_id=${orderId}&amount=${amount}`).then(r=>r.json());
      const click  = await fetch(`/api/click-url?order_id=${orderId}&amount=${amount}`).then(r=>r.json());
      document.getElementById('out').innerHTML = `
        <p>Order: <b>#${orderId}</b></p>
        <p><a href="${payme.url}" target="_blank">Payme bilan to‘lash</a></p>
        <p><a href="${click.url}" target="_blank">Click bilan to‘lash</a></p>
      `;
    }
  </script>
</body>
</html>
